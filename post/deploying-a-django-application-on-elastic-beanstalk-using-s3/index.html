<!doctype html><html class="not-ready lg:text-base" style=--bg:#fff lang=en-us><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><title>Deploying a Django application on Elastic Beanstalk using S3 - Kiran Gangadharan</title>
<meta name=theme-color><meta name=description content="This post was born out of the pain to get a sample django application, configured properly, using Amazon S3 for serving static files, to run on AWS Elastic Beanstalk. I encountered many errors on the way, but finally managed to get a full fledged application running successfully. I am gonna try and highlight the key steps here to help you get your project up and running in no time.
First, create a sample Django project and a AWS Elastic Beanstalk environment for your application, as per the instructions provided in the official AWS documentation."><meta name=author content="Kiran Gangadharan"><link rel="preload stylesheet" as=style href=http://kirang.in/main.min.css><link rel=preload as=image href=http://kirang.in/theme.svg><link rel=preload as=image href=http://kirang.in/twitter.svg><link rel=preload as=image href=http://kirang.in/github.svg><link rel=preload as=image href=http://kirang.in/linkedin.svg><link rel=preload as=image href=http://kirang.in/rss.svg><script defer src=http://kirang.in/highlight.min.js onload=hljs.initHighlightingOnLoad()></script><link rel=icon href=http://kirang.in/favicon_32x32.png><link rel=apple-touch-icon href=http://kirang.in/apple-touch-icon.png><meta name=generator content="Hugo 0.126.1"><meta itemprop=name content="Deploying a Django application on Elastic Beanstalk using S3"><meta itemprop=description content="This post was born out of the pain to get a sample django application, configured properly, using Amazon S3 for serving static files, to run on AWS Elastic Beanstalk. I encountered many errors on the way, but finally managed to get a full fledged application running successfully. I am gonna try and highlight the key steps here to help you get your project up and running in no time.
First, create a sample Django project and a AWS Elastic Beanstalk environment for your application, as per the instructions provided in the official AWS documentation."><meta itemprop=datePublished content="2013-08-20T06:20:00+05:30"><meta itemprop=dateModified content="2013-08-20T06:20:00+05:30"><meta itemprop=wordCount content="461"><meta itemprop=keywords content="Aws,Deployment,Django,Elasticbeanstalk,Python,S3"><meta property="og:url" content="http://kirang.in/post/deploying-a-django-application-on-elastic-beanstalk-using-s3/"><meta property="og:site_name" content="Kiran Gangadharan"><meta property="og:title" content="Deploying a Django application on Elastic Beanstalk using S3"><meta property="og:description" content="This post was born out of the pain to get a sample django application, configured properly, using Amazon S3 for serving static files, to run on AWS Elastic Beanstalk. I encountered many errors on the way, but finally managed to get a full fledged application running successfully. I am gonna try and highlight the key steps here to help you get your project up and running in no time.
First, create a sample Django project and a AWS Elastic Beanstalk environment for your application, as per the instructions provided in the official AWS documentation."><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="post"><meta property="article:published_time" content="2013-08-20T06:20:00+05:30"><meta property="article:modified_time" content="2013-08-20T06:20:00+05:30"><meta property="article:tag" content="Aws"><meta property="article:tag" content="Deployment"><meta property="article:tag" content="Django"><meta property="article:tag" content="Elasticbeanstalk"><meta property="article:tag" content="Python"><meta property="article:tag" content="S3"><meta name=twitter:card content="summary"><meta name=twitter:title content="Deploying a Django application on Elastic Beanstalk using S3"><meta name=twitter:description content="This post was born out of the pain to get a sample django application, configured properly, using Amazon S3 for serving static files, to run on AWS Elastic Beanstalk. I encountered many errors on the way, but finally managed to get a full fledged application running successfully. I am gonna try and highlight the key steps here to help you get your project up and running in no time.
First, create a sample Django project and a AWS Elastic Beanstalk environment for your application, as per the instructions provided in the official AWS documentation."><link rel=canonical href=http://kirang.in/post/deploying-a-django-application-on-elastic-beanstalk-using-s3/></head><body class="text-black duration-200 ease-out dark:text-white"><header class="mx-auto flex h-[4.5rem] max-w-3xl px-8 lg:justify-center"><div class="relative z-50 mr-auto flex items-center"><a class="-translate-x-[1px] -translate-y-[1px] text-2xl font-semibold" href=http://kirang.in/>Kiran Gangadharan</a><div class="btn-dark text-[0] ml-4 h-6 w-6 shrink-0 cursor-pointer [background:url(./theme.svg)_left_center/cover_no-repeat] dark:invert dark:[background-position:right]" role=button aria-label=Dark></div></div><div class="btn-menu relative z-50 -mr-8 flex h-[4.5rem] w-[5rem] shrink-0 cursor-pointer flex-col items-center justify-center gap-2.5 lg:hidden" role=button aria-label=Menu></div><script>const htmlClass=document.documentElement.classList;setTimeout(()=>{htmlClass.remove("not-ready")},10);const btnMenu=document.querySelector(".btn-menu");btnMenu.addEventListener("click",()=>{htmlClass.toggle("open")});const metaTheme=document.querySelector('meta[name="theme-color"]'),lightBg="#fff".replace(/"/g,""),setDark=e=>{metaTheme.setAttribute("content",e?"#000":lightBg),htmlClass[e?"add":"remove"]("dark"),localStorage.setItem("dark",e)},darkScheme=window.matchMedia("(prefers-color-scheme: dark)");if(htmlClass.contains("dark"))setDark(!0);else{const e=localStorage.getItem("dark");setDark(e?e==="true":darkScheme.matches)}darkScheme.addEventListener("change",e=>{setDark(e.matches)});const btnDark=document.querySelector(".btn-dark");btnDark.addEventListener("click",()=>{setDark(localStorage.getItem("dark")!=="true")})</script><div class="nav-wrapper fixed inset-x-0 top-full z-40 flex h-full select-none flex-col justify-center pb-16 duration-200 dark:bg-black lg:static lg:h-auto lg:flex-row lg:!bg-transparent lg:pb-0 lg:transition-none"><nav class="lg:ml-12 lg:flex lg:flex-row lg:items-center lg:space-x-6"><a class="block text-center text-2xl leading-[5rem] lg:text-base lg:font-normal" href=/about/>About</a></nav><nav class="mt-12 flex justify-center space-x-10 dark:invert lg:ml-12 lg:mt-0 lg:items-center lg:space-x-6"><a class="h-8 w-8 text-[0] [background:var(--url)_center_center/cover_no-repeat] lg:h-6 lg:w-6" style=--url:url(./twitter.svg) href=https://twitter.com/kirang89 target=_blank rel=me>twitter
</a><a class="h-8 w-8 text-[0] [background:var(--url)_center_center/cover_no-repeat] lg:h-6 lg:w-6" style=--url:url(./github.svg) href=https://github.com/kirang89 target=_blank rel=me>github
</a><a class="h-8 w-8 text-[0] [background:var(--url)_center_center/cover_no-repeat] lg:h-6 lg:w-6" style=--url:url(./linkedin.svg) href=https://linkedin.com/in/kirang89 target=_blank rel=me>linkedin
</a><a class="h-8 w-8 text-[0] [background:var(--url)_center_center/cover_no-repeat] lg:h-6 lg:w-6" style=--url:url(./rss.svg) href=http://kirang.in/index.xml target=_blank rel=alternate>rss</a></nav></div></header><main class="prose prose-neutral relative mx-auto min-h-[calc(100%-9rem)] max-w-3xl px-8 pb-16 pt-12 dark:prose-invert"><article><header class=mb-16><h1 class="!my-0 pb-2.5">Deploying a Django application on Elastic Beanstalk using S3</h1><div class="text-sm antialiased opacity-60"><time>Aug 20, 2013</time>
<span class=mx-1>&#183;</span>
<span>Kiran Gangadharan</span></div></header><section><p>This post was born out of the pain to get a sample django application,
configured properly, using Amazon S3 for serving static files, to  run
on AWS Elastic Beanstalk. I encountered many errors on the way, but
finally managed to get a full fledged application running successfully.
I am gonna try and highlight the key steps here to help you get your
project up and running in no time.</p><p>First, create a sample Django project
and a AWS Elastic Beanstalk environment for your application, as per the
instructions provided in the <a href=http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/create_deploy_Python_django.html>official AWS
documentation</a>.</p><p>Once you&rsquo;ve successfully deployed a dummy application to AWS Elastic
Beanstalk, you need to configure the application to let S3 take care of
serving the static files. One important point to remember here is that
Django expects your webserver to serve static files in production mode
(<code>DEBUG = False</code>) and thus will not handle it on it&rsquo;s own, unlike in
development mode. Understanding this is critical to a successful
deployment.</p><p>So now let&rsquo;s go ahead and add S3 support. First you need to add the
following dependencies to your requirements.txt:</p><div class=highlight><div style=color:#c6d0f5;background-color:#303446;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#c6d0f5;background-color:#303446;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#838ba7">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#838ba7">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#838ba7">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#c6d0f5;background-color:#303446;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>pip install django-storages boto
</span></span><span style=display:flex><span>pip freeze | grep django-storages &gt;&gt; requirements.txt
</span></span><span style=display:flex><span>pip freeze | grep boto &gt;&gt; requirements.txt
</span></span></code></pre></td></tr></table></div></div><p>Next, add <strong>storages</strong> to INSTALLED_APPS  in
your settings file:</p><div class=highlight><div style=color:#c6d0f5;background-color:#303446;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#c6d0f5;background-color:#303446;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#838ba7">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#838ba7">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#838ba7">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#838ba7">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#838ba7">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#838ba7">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#838ba7">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#838ba7">8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#838ba7">9
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#c6d0f5;background-color:#303446;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>INSTALLED_APPS <span style=color:#99d1db;font-weight:700>=</span> (
</span></span><span style=display:flex><span>    <span style=color:#a6d189>&#39;django.contrib.auth&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6d189>&#39;django.contrib.contenttypes&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6d189>&#39;django.contrib.sessions&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6d189>&#39;django.contrib.sites&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6d189>&#39;django.contrib.messages&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6d189>&#39;django.contrib.admin&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6d189>&#39;storages&#39;</span>,
</span></span><span style=display:flex><span>)
</span></span></code></pre></td></tr></table></div></div><p>Now we need to provide AWS credentials and the bucket name to allow AWS
Elastic Beanstalk to transfer files to S3.  Add the following
configuration to settings.py :</p><div class=highlight><div style=color:#c6d0f5;background-color:#303446;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#c6d0f5;background-color:#303446;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#838ba7">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#838ba7">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#838ba7">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#838ba7">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#838ba7">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#838ba7">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#838ba7">7
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#c6d0f5;background-color:#303446;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#ca9ee6>if</span> <span style=color:#99d1db;font-weight:700>not</span> DEBUG:
</span></span><span style=display:flex><span>    AWS_STORAGE_BUCKET_NAME <span style=color:#99d1db;font-weight:700>=</span> <span style=color:#a6d189>&#39;&lt;s3 bucket name&gt;&#39;</span>
</span></span><span style=display:flex><span>    AWS_ACCESS_KEY_ID <span style=color:#99d1db;font-weight:700>=</span> <span style=color:#a6d189>&#39;&lt;access key id&gt;&#39;</span>
</span></span><span style=display:flex><span>    AWS_SECRET_ACCESS_KEY <span style=color:#99d1db;font-weight:700>=</span> <span style=color:#a6d189>&#39;&lt;secret access key&gt;&#39;</span>
</span></span><span style=display:flex><span>    STATICFILES_STORAGE <span style=color:#99d1db;font-weight:700>=</span> <span style=color:#a6d189>&#39;storages.backends.s3boto.S3BotoStorage&#39;</span>
</span></span><span style=display:flex><span>    S3_URL <span style=color:#99d1db;font-weight:700>=</span> <span style=color:#a6d189>&#39;http://</span><span style=color:#a6d189>%s</span><span style=color:#a6d189>.s3.amazonaws.com/&#39;</span> <span style=color:#99d1db;font-weight:700>%</span> AWS_STORAGE_BUCKET_NAME
</span></span><span style=display:flex><span>    STATIC_URL <span style=color:#99d1db;font-weight:700>=</span> S3_URL
</span></span></code></pre></td></tr></table></div></div><p>The STATICFILES_STORAGE  setting
tells our application to use S3 for storing our static files.</p><p>The last step is to configure STATIC_ROOT * *to
create a static directory in the root folder of your project. To do
that, add the following lines to your settings:</p><div class=highlight><div style=color:#c6d0f5;background-color:#303446;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#c6d0f5;background-color:#303446;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#838ba7"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#838ba7"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#838ba7"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#838ba7"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#838ba7"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#838ba7"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#838ba7"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#838ba7"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#838ba7"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#838ba7">10
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#c6d0f5;background-color:#303446;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#81c8be>import</span> <span style=color:#ef9f76>os</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>STATIC_ROOT <span style=color:#99d1db;font-weight:700>=</span> os<span style=color:#99d1db;font-weight:700>.</span>path<span style=color:#99d1db;font-weight:700>.</span>join(
</span></span><span style=display:flex><span>                  os<span style=color:#99d1db;font-weight:700>.</span>path<span style=color:#99d1db;font-weight:700>.</span>dirname(
</span></span><span style=display:flex><span>				      os<span style=color:#99d1db;font-weight:700>.</span>path<span style=color:#99d1db;font-weight:700>.</span>dirname(
</span></span><span style=display:flex><span>					      os<span style=color:#99d1db;font-weight:700>.</span>path<span style=color:#99d1db;font-weight:700>.</span>abspath(<span style=color:#f2d5cf>__file__</span>)
</span></span><span style=display:flex><span>					  )
</span></span><span style=display:flex><span>	              ),
</span></span><span style=display:flex><span>				  <span style=color:#a6d189>&#39;static&#39;</span>
</span></span><span style=display:flex><span>			  )
</span></span></code></pre></td></tr></table></div></div><p>That&rsquo;s it ! When you run the application on AWS Elastic Beanstalk,
the <code>03_collectstatic</code> command that you added to the ebs
configuration file, will collect the static files from all your
applications and then add them to the static folder created at
STATIC_ROOT. This folder is then deployed to S3 and voila ! All your static files will now be served from the Amazon S3 server.</p><p>Hope you got your application running without any hassles. If you still
have difficulties following this tutorial, you can check out
<a href=https://github.com/kirang89/djangoboilerplate>djangoboilerplate</a>, a
boilerplate application fully configured and ready for deployment.</p></section><footer class="mt-12 flex flex-wrap"><a class="mb-1.5 mr-1.5 rounded-lg bg-black/[3%] px-5 py-1.5 no-underline dark:bg-white/[8%]" href=http://kirang.in/tags/aws>aws</a>
<a class="mb-1.5 mr-1.5 rounded-lg bg-black/[3%] px-5 py-1.5 no-underline dark:bg-white/[8%]" href=http://kirang.in/tags/deployment>deployment</a>
<a class="mb-1.5 mr-1.5 rounded-lg bg-black/[3%] px-5 py-1.5 no-underline dark:bg-white/[8%]" href=http://kirang.in/tags/django>django</a>
<a class="mb-1.5 mr-1.5 rounded-lg bg-black/[3%] px-5 py-1.5 no-underline dark:bg-white/[8%]" href=http://kirang.in/tags/elasticbeanstalk>elasticbeanstalk</a>
<a class="mb-1.5 mr-1.5 rounded-lg bg-black/[3%] px-5 py-1.5 no-underline dark:bg-white/[8%]" href=http://kirang.in/tags/python>python</a>
<a class="mb-1.5 mr-1.5 rounded-lg bg-black/[3%] px-5 py-1.5 no-underline dark:bg-white/[8%]" href=http://kirang.in/tags/s3>s3</a></footer><nav class="mt-24 flex rounded-lg bg-black/[3%] text-lg dark:bg-white/[8%]"><a class="flex w-1/2 items-center rounded-l-md p-6 pr-3 font-semibold no-underline hover:bg-black/[2%] dark:hover:bg-white/[3%]" href=http://kirang.in/post/familiarising-yourself-with-a-large-codebase/><span class=mr-1.5>←</span><span>Familiarising yourself with a large codebase</span></a>
<a class="ml-auto flex w-1/2 items-center justify-end rounded-r-md p-6 pl-3 font-semibold no-underline hover:bg-black/[2%] dark:hover:bg-white/[3%]" href=http://kirang.in/post/web-typography-checklist/><span>Web Typography checklist</span><span class=ml-1.5>→</span></a></nav><div class="giscus mt-24"></div><script src=https://giscus.app/client.js data-repo=kirang89/kirang.in data-repo-id="MDEwOlJlcG9zaXRvcnkxNjU2NzY2MTY=" data-category=General data-category-id=DIC_kwDOCeAGSM4Cfo4J data-mapping=title data-strict=1 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=top data-theme=light data-lang=en data-loading=lazy crossorigin=anonymous async></script></article></main><footer class="opaco mx-auto flex h-[4.5rem] max-w-3xl items-center px-8 text-[0.9em] opacity-60"><div class=mr-auto>&copy; 2024
<a class=link href=http://kirang.in/>Kiran Gangadharan</a></div><a class="link mx-6" href=https://gohugo.io/ rel=noopener target=_blank>Powered by Hugo️️</a>️
<a class=link href=https://github.com/nanxiaobei/hugo-paper rel=noopener target=_blank>✎ Paper</a></footer></body></html>