<!doctype html>







































<html
  class="not-ready lg:text-base"
  style="--bg: #fff"
  lang="en-us"
>
  <head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1, shrink-to-fit=no"
  />

  
  <title>Useful AWK one-liners - Kiran Gangadharan</title>

  
  <meta name="theme-color" />

  
  
  
  
  <meta name="description" content="While reading Masterminds of Programming I came across the interview with Alfred Aho and his thoughts about the design of the AWK programming language. I&rsquo;ve always known about the existence of awk, but have never really felt the urge to dive in. Then I came across this sentence:
If I had to choose a word to describe our centering forces in language design, I&rsquo;d say Kernighan emphasized ease of learning; Weiberger, soundness of implementation; and I, utility." />
  <meta name="author" content="Kiran Gangadharan" />
  

  
  
  
  
  
  
  <link rel="preload stylesheet" as="style" href="http://kirang.in/main.min.css" />

  
  
  
  
  
  <link rel="preload" as="image" href="http://kirang.in/theme.svg" />

  
  
  
  
  

  
  
  <link rel="preload" as="image" href="http://kirang.in/twitter.svg" />
  
  <link rel="preload" as="image" href="http://kirang.in/github.svg" />
  
  <link rel="preload" as="image" href="http://kirang.in/linkedin.svg" />
  
  <link rel="preload" as="image" href="http://kirang.in/rss.svg" />
  
  

  
  
  <script
    defer
    src="http://kirang.in/highlight.min.js"
    onload="hljs.initHighlightingOnLoad();"
  ></script>
  

  
  
  

  
  <link rel="icon" href="http://kirang.in/favicon_32x32.png" />
  <link rel="apple-touch-icon" href="http://kirang.in/apple-touch-icon.png" />

  
  <meta name="generator" content="Hugo 0.126.1">

  
  
  
  
  


  
  
  <meta itemprop="name" content="Useful AWK one-liners">
  <meta itemprop="description" content="While reading Masterminds of Programming I came across the interview with Alfred Aho and his thoughts about the design of the AWK programming language. I’ve always known about the existence of awk, but have never really felt the urge to dive in. Then I came across this sentence:
If I had to choose a word to describe our centering forces in language design, I’d say Kernighan emphasized ease of learning; Weiberger, soundness of implementation; and I, utility.">
  <meta itemprop="datePublished" content="2015-12-15T00:00:00+05:30">
  <meta itemprop="dateModified" content="2015-12-15T00:00:00+05:30">
  <meta itemprop="wordCount" content="303">
  <meta itemprop="keywords" content="Awk,Productivity">
  
  <meta property="og:url" content="http://kirang.in/post/useful-awk-one-liners/">
  <meta property="og:site_name" content="Kiran Gangadharan">
  <meta property="og:title" content="Useful AWK one-liners">
  <meta property="og:description" content="While reading Masterminds of Programming I came across the interview with Alfred Aho and his thoughts about the design of the AWK programming language. I’ve always known about the existence of awk, but have never really felt the urge to dive in. Then I came across this sentence:
If I had to choose a word to describe our centering forces in language design, I’d say Kernighan emphasized ease of learning; Weiberger, soundness of implementation; and I, utility.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="post">
    <meta property="article:published_time" content="2015-12-15T00:00:00+05:30">
    <meta property="article:modified_time" content="2015-12-15T00:00:00+05:30">
    <meta property="article:tag" content="Awk">
    <meta property="article:tag" content="Productivity">

  
  
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Useful AWK one-liners">
  <meta name="twitter:description" content="While reading Masterminds of Programming I came across the interview with Alfred Aho and his thoughts about the design of the AWK programming language. I’ve always known about the existence of awk, but have never really felt the urge to dive in. Then I came across this sentence:
If I had to choose a word to describe our centering forces in language design, I’d say Kernighan emphasized ease of learning; Weiberger, soundness of implementation; and I, utility.">

  
  
  
  <link rel="canonical" href="http://kirang.in/post/useful-awk-one-liners/" />
  
  
</head>

  <body class="text-black duration-200 ease-out dark:text-white">
    <header class="mx-auto flex h-[4.5rem] max-w-3xl px-8 lg:justify-center">
  <div class="relative z-50 mr-auto flex items-center">
    <a
      class="-translate-x-[1px] -translate-y-[1px] text-2xl font-semibold"
      href="http://kirang.in/"
      >Kiran Gangadharan</a
    >
    <div
      class="btn-dark text-[0] ml-4 h-6 w-6 shrink-0 cursor-pointer [background:url(./theme.svg)_left_center/cover_no-repeat] dark:invert dark:[background-position:right]"
      role="button"
      aria-label="Dark"
    ></div>
  </div>

  <div
    class="btn-menu relative z-50 -mr-8 flex h-[4.5rem] w-[5rem] shrink-0 cursor-pointer flex-col items-center justify-center gap-2.5 lg:hidden"
    role="button"
    aria-label="Menu"
  ></div>

  

  <script>
    
    const htmlClass = document.documentElement.classList;
    setTimeout(() => {
      htmlClass.remove('not-ready');
    }, 10);

    
    const btnMenu = document.querySelector('.btn-menu');
    btnMenu.addEventListener('click', () => {
      htmlClass.toggle('open');
    });

    
    const metaTheme = document.querySelector('meta[name="theme-color"]');
    const lightBg = '#fff'.replace(/"/g, '');
    const setDark = (isDark) => {
      metaTheme.setAttribute('content', isDark ? '#000' : lightBg);
      htmlClass[isDark ? 'add' : 'remove']('dark');
      localStorage.setItem('dark', isDark);
    };

    
    const darkScheme = window.matchMedia('(prefers-color-scheme: dark)');
    if (htmlClass.contains('dark')) {
      setDark(true);
    } else {
      const darkVal = localStorage.getItem('dark');
      setDark(darkVal ? darkVal === 'true' : darkScheme.matches);
    }

    
    darkScheme.addEventListener('change', (event) => {
      setDark(event.matches);
    });

    
    const btnDark = document.querySelector('.btn-dark');
    btnDark.addEventListener('click', () => {
      setDark(localStorage.getItem('dark') !== 'true');
    });
  </script>

  <div
    class="nav-wrapper fixed inset-x-0 top-full z-40 flex h-full select-none flex-col justify-center pb-16 duration-200 dark:bg-black lg:static lg:h-auto lg:flex-row lg:!bg-transparent lg:pb-0 lg:transition-none"
  >
    
    

    
    <nav
      class="mt-12 flex justify-center space-x-10 dark:invert lg:ml-12 lg:mt-0 lg:items-center lg:space-x-6"
    >
      
      <a
        class="h-8 w-8 text-[0] [background:var(--url)_center_center/cover_no-repeat] lg:h-6 lg:w-6"
        style="--url: url(./twitter.svg)"
        href="https://twitter.com/kirang89"
        target="_blank"
        rel="me"
      >
        twitter
      </a>
      
      <a
        class="h-8 w-8 text-[0] [background:var(--url)_center_center/cover_no-repeat] lg:h-6 lg:w-6"
        style="--url: url(./github.svg)"
        href="https://github.com/kirang89"
        target="_blank"
        rel="me"
      >
        github
      </a>
      
      <a
        class="h-8 w-8 text-[0] [background:var(--url)_center_center/cover_no-repeat] lg:h-6 lg:w-6"
        style="--url: url(./linkedin.svg)"
        href="https://linkedin.com/in/kirang89"
        target="_blank"
        rel="me"
      >
        linkedin
      </a>
      
      <a
        class="h-8 w-8 text-[0] [background:var(--url)_center_center/cover_no-repeat] lg:h-6 lg:w-6"
        style="--url: url(./rss.svg)"
        href="http://kirang.in/index.xml"
        target="_blank"
        rel="alternate"
      >
        rss
      </a>
      
    </nav>
    
  </div>
</header>


    <main
      class="prose prose-neutral relative mx-auto min-h-[calc(100%-9rem)] max-w-3xl px-8 pb-16 pt-12 dark:prose-invert"
    >
      

<article>
  <header class="mb-16">
    <h1 class="!my-0 pb-2.5">Useful AWK one-liners</h1>

    
    <div class="text-sm antialiased opacity-60">
      
      <time>Dec 15, 2015</time>
      
      
      
      
    </div>
    
  </header>

  <section><p>While reading
<a href="http://shop.oreilly.com/product/9780596515171.do">Masterminds of Programming</a> I
came across the interview with <a href="https://en.wikipedia.org/wiki/Alfred_Aho">Alfred Aho</a> and his thoughts about the design of
the AWK programming language. I&rsquo;ve always known about the existence of awk, but
have never really felt the urge to dive in. Then I came across this sentence:</p>
<blockquote>
<p>If I had to choose a word to describe our centering forces in language design,
I&rsquo;d say Kernighan emphasized ease of learning; Weiberger, soundness of
implementation; and I, utility. I think AWK has all three of these properties.</p>
</blockquote>
<p>This got me curious enough to put down the book and start looking through a few
AWK tutorials. After mucking around with it for a day or two, I am really glad
that I did so. AWK is a simple yet powerful language to do some quick data
processing for which languages like Python or Ruby may be an overkill.</p>
<p>While learning, I&rsquo;ve collected a few one-liners together, as a cheatsheat for
myself.</p>
<h3 id="remove-duplicate-lines-from-a-file">Remove duplicate lines from a file</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>awk <span style="color:#d20;background-color:#fff0f0">&#39;!a[$0]++&#39;</span> data.txt
</span></span></code></pre></div><h3 id="print-account-name-and-role-from-etcpasswd">Print account name and role from /etc/passwd</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>awk -F : <span style="color:#d20;background-color:#fff0f0">&#39;/^[^(#|_)]/ {print $1, &#34;=&gt;&#34;, $5}&#39;</span> /etc/passwd
</span></span></code></pre></div><h3 id="prefixing-line-with-increasing-number">Prefixing line with increasing number</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>awk <span style="color:#d20;background-color:#fff0f0">&#39;{print FNR &#34;. &#34; $0}&#39;</span> data1.txt
</span></span></code></pre></div><h3 id="find-sum-of-columns-for-each-row">Find sum of columns for each row</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>awk <span style="color:#d20;background-color:#fff0f0">&#39;{s=0; for (i=1; i&lt;=NF; i++) s=s+$i; print s}&#39;</span> data1.txt
</span></span></code></pre></div><h3 id="find-the-line-containing-largest-value-in-the-first-column">Find the line containing largest value in the first column</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>awk <span style="color:#d20;background-color:#fff0f0">&#39;$1 &gt; max {max=$1; maxline=$0}; END{ print maxline}&#39;</span> data1.txt
</span></span></code></pre></div><h3 id="find-and-replace-in-file">Find and replace in file</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#888"># Replace only first instance in line</span>
</span></span><span style="display:flex;"><span>awk <span style="color:#d20;background-color:#fff0f0">&#39;{sub(/HTML/, &#34;html&#34;)}; 1&#39;</span> data1.txt &gt; data2.txt
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#888"># Replace all instances in line</span>
</span></span><span style="display:flex;"><span>awk <span style="color:#d20;background-color:#fff0f0">&#39;{gsub(/HTML/, &#34;html&#34;)}; 1&#39;</span> data1.txt &gt; data2.txt
</span></span></code></pre></div><h3 id="swap-first-two-columns-of-every-line">Swap first two columns of every line</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>awk <span style="color:#d20;background-color:#fff0f0">&#39;{temp=$1; $1=$2; $2=temp} 1&#39;</span> data2.txt
</span></span></code></pre></div><h3 id="delete-second-column-from-every-line">Delete second column from every line</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>awk <span style="color:#d20;background-color:#fff0f0">&#39;{ $2 = &#34;&#34;; print }&#39;</span> data2.txt
</span></span></code></pre></div><h3 id="perform-search-similar-to-sql-where">Perform search similar to SQL &lsquo;where&rsquo;</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>awk <span style="color:#d20;background-color:#fff0f0">&#39;$2 == &#34;hello&#34;&#39;</span> data2.txt
</span></span></code></pre></div></section>

  
  
  <footer class="mt-12 flex flex-wrap">
     
    <a
      class="mb-1.5 mr-1.5 rounded-lg bg-black/[3%] px-5 py-1.5 no-underline dark:bg-white/[8%]"
      href="http://kirang.in/tags/awk"
      >awk</a
    >
     
    <a
      class="mb-1.5 mr-1.5 rounded-lg bg-black/[3%] px-5 py-1.5 no-underline dark:bg-white/[8%]"
      href="http://kirang.in/tags/productivity"
      >productivity</a
    >
    
  </footer>
  

  
  
  
  
  <nav class="mt-24 flex rounded-lg bg-black/[3%] text-lg dark:bg-white/[8%]">
    
    <a
      class="flex w-1/2 items-center rounded-l-md p-6 pr-3 font-semibold no-underline hover:bg-black/[2%] dark:hover:bg-white/[3%]"
      href="http://kirang.in/post/concurrent-prime-sieve-in-clojure/"
      ><span class="mr-1.5">←</span><span>Concurrent Prime Sieve in Clojure</span></a
    >
    
    
    <a
      class="ml-auto flex w-1/2 items-center justify-end rounded-r-md p-6 pl-3 font-semibold no-underline hover:bg-black/[2%] dark:hover:bg-white/[3%]"
      href="http://kirang.in/post/setting-up-org-mode-pdf-export-in-osx-elcapitan/"
      ><span>Setting up org-mode pdf export in OS X ElCapitan</span><span class="ml-1.5">→</span></a
    >
    
  </nav>
  
  

  
  
  <div class="mt-24" id="disqus_thread"></div>
  <script>
    const disqusShortname = 'kirangin';
    const script = document.createElement('script');
    script.src = 'https://' + disqusShortname + '.disqus.com/embed.js';
    script.setAttribute('data-timestamp', +new Date());
    document.head.appendChild(script);
  </script>
  

  
  

  


  
</article>


    </main>

    <footer
  class="opaco mx-auto flex h-[4.5rem] max-w-3xl items-center px-8 text-[0.9em] opacity-60"
>
  <div class="mr-auto">
    &copy; 2024
    <a class="link" href="http://kirang.in/">Kiran Gangadharan</a>
  </div>
  <a class="link mx-6" href="https://gohugo.io/" rel="noopener" target="_blank"
    >Powered by Hugo️️</a
  >️
  <a
    class="link"
    href="https://github.com/nanxiaobei/hugo-paper"
    rel="noopener"
    target="_blank"
    >✎ Paper</a
  >
</footer>

  </body>
</html>
